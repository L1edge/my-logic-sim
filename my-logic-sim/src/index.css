@tailwind base;
@tailwind components;
@tailwind utilities;

html, body, #root, #app-container { width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden; }

:root {
  --bg-color: #f9fafb; --text-primary: #111827; --sidebar-bg: #ffffff; --sidebar-border: #e5e7eb;
  --node-input-bg: #ffffff; --node-input-border: #16a34a; --node-input-header: #dcfce7; --node-input-text: #166534; --node-input-val-color: #000000;
  --node-output-bg: #ffffff; --node-output-border: #f97316; --node-output-header: #ffedd5; --node-output-text: #9a3412; --node-output-val-color: #000000;
}

/* --- ТЕМНА ТЕМА (ОНОВЛЕНИЙ ФОН) --- */
[data-theme='dark'] {
  /* Глибокий темний колір (Rich Dark) замість світло-синього */
  --bg-color: #020617; 
  --text-primary: #f8fafc; 
  --sidebar-bg: #0f172a; /* Трохи світліший за фон для контрасту */
  --sidebar-border: #1e293b;

  --node-input-bg: #0f172a; --node-input-border: #22c55e; --node-input-header: #14532d; --node-input-text: #dcfce7; --node-input-val-color: #ffffff;
  --node-output-bg: #0f172a; --node-output-border: #f97316; --node-output-header: #7c2d12; --node-output-text: #ffedd5; --node-output-val-color: #ffffff;
}

[data-theme='dark'] .app-background {
  /* Той самий колір, що і змінна --bg-color */
  background-color: #020617;
  position: absolute;
  inset: 0;
  z-index: -1;
}

/* --- LIQUID GLASS ТЕМА --- */
[data-theme='glass'] {
  --bg-color: #050b14; --text-primary: #e2e8f0;
  --sidebar-bg: rgba(15, 23, 42, 0.4); --sidebar-border: rgba(255, 255, 255, 0.08);
  --node-input-bg: rgba(255, 255, 255, 0.03); --node-input-border: rgba(255, 255, 255, 0.15); --node-input-header: linear-gradient(180deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%);
  --node-input-text: #ffffff; --node-input-val-color: #ffffff;
  --node-output-bg: rgba(255, 255, 255, 0.03); --node-output-border: rgba(255, 255, 255, 0.15); --node-output-header: linear-gradient(180deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%);
  --node-output-text: #ffffff; --node-output-val-color: #ffffff;
}

body { background-color: var(--bg-color); color: var(--text-primary); transition: background-color 0.3s ease, color 0.3s ease; }

[data-theme='glass'] .app-background {
  background-color: #020617;
  background-image: url('./assets/liquid-bg.jpg'); 
  background-size: cover; background-position: center; background-repeat: no-repeat;
  position: absolute; inset: 0; z-index: -1;
}

[data-theme='glass'] aside { backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); }
[data-theme='glass'] aside .grid > div {
  background: linear-gradient(145deg, rgba(255,255,255,0.07) 0%, rgba(255,255,255,0.01) 100%);
  border: 1px solid rgba(255, 255, 255, 0.1); border-top: 1px solid rgba(255, 255, 255, 0.25); border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  box-shadow: 0 4px 15px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1); color: #fff; border-radius: 12px; backdrop-filter: blur(8px); overflow: hidden;
}
[data-theme='glass'] aside .grid > div:hover {
  background: linear-gradient(145deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 100%); border-color: rgba(255, 255, 255, 0.4);
  box-shadow: 0 0 20px rgba(56, 189, 248, 0.2), inset 0 0 10px rgba(255, 255, 255, 0.1); transform: translateY(-1px);
}
[data-theme='glass'] .react-flow__node {
  background: rgba(15, 23, 42, 0.6) !important; border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.15); border-top: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.1); backdrop-filter: blur(8px); transform: translateZ(0);
}
[data-theme='glass'] .node-header { border-bottom: 1px solid rgba(255, 255, 255, 0.1); background: linear-gradient(to bottom, rgba(255,255,255,0.05), transparent); }
[data-theme='glass'] select option, [data-theme='dark'] select option { background-color: #1e293b; color: #ffffff; }

.react-flow__edge.selected .react-flow__edge-path { stroke: #3b82f6 !important; stroke-width: 4px !important; filter: drop-shadow(0 0 4px rgba(59, 130, 246, 0.5)); }
.react-flow__edge:hover .react-flow__edge-path { stroke-width: 4px !important; cursor: pointer; }